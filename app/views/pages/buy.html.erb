<%= stylesheet_link_tag 'pages/buy', media: 'all' %>
<%= javascript_include_tag 'pages/buy', :defer => "defer" %>

<div class="main">
  <!-- <div class="container" id="reserve-nav">
    <ul id="nav-list">
      <li><a href="#" id="utility">utility</a></li>
      <li><a href="#" id="frame">frame</a></li>
      <li><a href="#" id="lens">lens</a></li>
      <li><a href="#" id="checkout">checkout</a></li>
      <hr id="nav-indicator">
    </ul>
  </div>

  <div id="reserve" class="container">

    <div class="step-container hidden" id="step-utility">
      <h1>choose between optical and sun</h1>
      <div class="row">
        <div class="five columns">
            <div class="select-utility" data-utility="optical">
              <%#= image_tag 'frames/ford/ford_black_optical.jpg' %>
              <p class="select-title">optical</p>
            </div>
        </div>
        <div class="two columns">&nbsp;</div>
        <div class="five columns">
            <div class="select-utility" data-utility="sun">
              <%#= image_tag 'frames/ive/ive_black_sun.jpg' %>
              <p class="select-title">sun</p>
            </div>
        </div>
      </div>
      <p class="pricing">Both available for <span id="non-prescription"></span> AUD. Shipping 4-6 weeks.</p>
      <br/><br/>
    </div>

    <div class="step-container hidden" id="step-frame">
      <h1>choose your frames</h1>
      <div class="row">
        <div class="five columns select-frame" data-frame="ford">
            <%= image_tag 'frames/ford/ford_black_sun.jpg', class: 'sun' %>
            <%= image_tag 'frames/ford/ford_black_optical.jpg', class: 'optical' %>
            <p class="select-title">ford</p>
        </div>
        <div class="two columns">&nbsp;</div>
        <div class="five columns select-frame" data-frame="ive">
            <%= image_tag 'frames/ive/ive_black_sun.jpg', class: 'sun' %>
            <%= image_tag 'frames/ive/ive_black_optical.jpg', class: 'optical' %>
            <p class="select-title">ive</p>
        </div>
      </div>
      <p class="pricing">Both available for <span id="non-prescription"></span> AUD. Shipping 4-6 weeks.</p>
    </div>

    <div class="step-container hidden" id="step-lens">
      <h1>choose your lenses</h1>
      <div class="row" id="lens-type">
        <div class="six columns select-lens" data-lens="prescription">
            <%= image_tag 'prescription.png', style: 'width: 35%;' %>
            <p class="select-title">prescription</p>
            <p class="pricing"><!--<span id="prescription"></span> AUD Total Single vision only. We will contact you to obtain your prescription.</p>
        </div>
        <div class="six columns select-lens" data-lens="non-prescription">
            <%= image_tag 'non_prescription.png', style: 'width: 35%;' %>
            <p class="select-title">non-prescription</p>
            <!-- <p class="pricing"><span id="non-prescription"></span> AUD Total</p>
        </div>
      </div>

      <div class="row" id="lens-size">
          <div class="six columns select-size" data-size="49">
            <%= image_tag 'frames/ford/ford_black_optical.jpg', class: 'optical', style: 'width: 73%' %>
            <%= image_tag 'frames/ford/ford_black_sun.jpg', class: 'sun', style: 'width: 73%' %>
            <p class="select-title">49mm</p>
            <p class="pricing">This size will fit most people</p>
          </div>

          <div class="six columns select-size" data-size="51.5">
            <%= image_tag 'frames/ford/ford_black_optical.jpg', class: 'optical', style: 'width: 80%' %>
            <%= image_tag 'frames/ford/ford_black_sun.jpg', class: 'sun', style: 'width: 80%' %>
            <p class="select-title">51.5mm</p>
            <p class="pricing">Choose this size if most glasses are too small</p>
          </div>
      </div>
    </div>

    <div class="step-container hidden" id="step-checkout">
          <h1>complete your reservation</h1>

          <div class="row step-content">
            <div class="six columns" id="glasses">
              <div class="row" id="checkout-images">
                <%= image_tag 'frames/ford/ford_black_sun.jpg', class: 'ford sun' %>
                <%= image_tag 'frames/ford/ford_black_optical.jpg', class: 'ford optical' %>
                <%= image_tag 'frames/ive/ive_black_optical.jpg', class: 'ive optical' %>
                <%= image_tag 'frames/ive/ive_black_sun.jpg', class: 'ive sun' %>
              </div>
              <div class="row">
                <div class="twelve columns glasses-details">
                  <dl>
                    <dt>Utility:</dt>
                    <dd id="utility-selection"></dd>
                    </br>

                    <dt>Frame:</dt>
                    <dd id="frame-selection"></dd>
                    <br/>
                    <dt>Lens:</dt>
                    <dd id="lens-selection"></dd>
                    <br/>
                    <dt>Size:</dt>
                    <dd id="size-selection"></dd>
                    <br/>
                    <div id="total-price">
                      <dt>Total:</dt>
                      <dd id="total-selection"></dd>
                    </div>
                  </dl>

                  <p>Includes complimentary shipping and Personal Setup. <span id="contact-prescription">We will contact you to obtain your prescription before your glasses are ready to ship.</span></p>

                </div>
              </div>
            </div>
            <div class="one column" style="height: 1px;">&nbsp;</div>
            <div class="five columns" id="shipping">

              <!-- the user has apple pay enabled -->
              <!-- <div id="apple-pay">
                <div class="apple-pay-button-with-text apple-pay-button-black-with-text">
                  <span class="text">Buy with</span>
                  <span class="logo"></span>
                </div>
                <p><a href="" id="ignore-apple-pay">Don't want to use Apple Pay?</a></p>

                <p class="pricing">You will be charged <span id="prescription"></span> AUD</p>

              </div>

              <!-- the user does not have apple pay enabled, so show the regular payment
              <div id="regular-pay">
                <%= form_for Preorder.new, :html => {:method => :post}, remote:true do |f| %>

                <!-- contact details
                <p class="section-head">Contact information</p>

                <%= label :purchase, :name, "Full Name" %>
                <%= f.text_field :name, placeholder: 'John Smith', autofocus: true %>

                <%= label :purchase, :email, "Email Address" %>
                <%= f.text_field :email, placeholder: 'john@tzukuri.com' %>

                <%= label :purchase, :phone, "Contact Number" %>
                <%= f.telephone_field :phone,    placeholder: '04XX XXX XXX' %>

                <!-- shipping details
                <p class="section-head">Shipping information</p>

                <%= label :purchase, :address1, "Shipping Address 1" %>
                <%= f.text_field :address1, placeholder: 'Street name, number, etc.' %>

                <%= label :purchase, :address2, "Shipping Address 2" %>
                <%= f.text_field :address2, placeholder: 'City, suburb, etc.' %>

                <%= label :purchase, :state, "State" %>
                <%= f.text_field   :state, placeholder: 'New South Wales' %>

                <%= label :purchase, :postcode, "Postal Code" %>
                <%= f.text_field :postal_code, placeholder: '1234', maxlength: 4 %>

                <%= label :purchase, :country, "Country" %>
                <%= f.text_field :country,  placeholder: 'country', value: 'Australia', disabled: true %>

                <%= label :purchase, :coupon, "Deposit Token (Optional)" %>
                <%= f.text_field :coupon, placeholder: 'Deposit token' %>

                <% end %>

                <form id="payment-form">
                  <p class="section-head" style="padding-top: 15px;">Payment information</p>

                  <div id="cc">
                      <label for="">Credit Card Number</label>
                      <input id="payment_ccNumber" name="number" type="text" data-stripe="number" placeholder="4000 0566 5566 5556">

                      <label ford="">Expiry Date</label>
                      <select name="month" style="width: 49%" data-stripe="exp-month">
                        <option value="1">Jan (01)</option>
                        <option value="2">Feb (02)</option>
                        <option value="3">Mar (03)</option>
                        <option value="4">Apr (04)</option>
                        <option value="5">May (05)</option>
                        <option value="6">Jun (06)</option>
                        <option value="7">Jul (07)</option>
                        <option value="8">Aug (08)</option>
                        <option value="9">Sep (09)</option>
                        <option value="10">Oct (10)</option>
                        <option value="11">Nov (11)</option>
                        <option value="12">Dec (12)</option>
                      </select>

                      <select name="year" style="width: 49%" data-stripe="exp-year">
                        <option>2016</option>
                        <option>2017</option>
                        <option>2018</option>
                        <option>2019</option>
                        <option>2020</option>
                        <option>2021</option>
                        <option>2022</option>
                        <option>2023</option>
                        <option>2024</option>
                        <option>2025</option>
                        <option>2026</option>
                      </select>

                      <label for="">Security Code</label>
                      <input id="payment_cvv" name="CVV" type="text" placeholder="Security code" data-stripe="CVV">
                  </div>

                  <button id="reserve-submit" type="submit" class="order-btn">
                    <span id="reserve-for">reserve for 485 AUD</span>
                  </button>
                </form>

                <button id="gift-redeem" class="order-btn" style="display: none; margin: 30px auto 20px auto;">
                  <span>redeem gift code</span>
                </button>

                <div id="submit-spinner" class="loader" style="display:none"></div>

                <p id="error-messages"></p>
              </div>

              <!-- the user has completed their registration
              <div id="thank-you">
                <hr>
                <p>Thanks for reserving your Tzukuris. You should receive an order confirmation shortly. <br/><br/> If you have any questions please get in touch at <a href="mailto:hello@tzukuri.com">hello@tzukuri.com</a>.</p>
              </div>

            </div>
          </div>

    </div>

  </div> -->


  <div class="panel container" id="purchase">
    <div class="row">
      <div class="six columns frame-col">
        <%= image_tag 'frames/ive/ive_black_optical.jpg'  %>
        <br/><br/>
        <p class="frame-name">Ive</p>
        <p class="frame-detail">Matte Black &middot; 485 AUD</p>
        <button id="buy-ive">buy now</button>
      </div>
      <div class="six columns frame-col">
        <%= image_tag 'frames/ford/ford_black_optical.jpg' %>
        <br/><br/>
        <p class="frame-name">Ford</p>
        <p class="frame-detail">Matte Black &middot; 485 AUD</p>
        <button id="buy-ford">buy now</button>
      </div>
    </div>
  </div>

  <div class="panel container" id="checkout">
    <div class="row">
      <a href="#" id="checkout-back">&larr; &nbsp; back</a>
    </div>
    <br/><br/>

    <div class="row">
      <!-- order details -->
      <div class="six columns" id="order-details">
        <%= image_tag 'frames/ford/ford_black_optical.jpg', id:'Ford-Optical', class:'glasses' %>
        <%= image_tag 'frames/ford/ford_black_sun.jpg', id: 'Ford-Sun', class: 'glasses' %>

        <%= image_tag 'frames/ive/ive_black_optical.jpg', id:'Ive-Optical', class: 'glasses' %>
        <%= image_tag 'frames/ive/ive_black_sun.jpg', id: 'Ive-Sun', class: 'glasses' %>


        <dl>
          <dt>Frame:</dt>
          <dd id="frame-selection">ive</dd>
          <br>
          <div id="total-price">
            <dt>Total:</dt>
            <dd id="total-selection">485 AUD</dd>
          </div>
        </dl>

        <p>Includes complementary Australia-wide shipping.</p>

      </div>
      <!-- checkout form -->
      <div class="six columns">
        <p class="section-head">Glasses Information</p>

        <form>
          <div id="utility-group">
            <label>Optical or Sun?</label>
            <select id="utility-select">
              <option>- SELECT -</option>
              <option>Optical</option>
              <option>Sun</option>
            </select>
          </div>

          <div id="lens-group">
            <label>Lens Selection</label>
            <select id="lens-select">
              <option>- SELECT -</option>
              <option>Non-Prescription (Plano)</option>
              <option>Prescription Reading</optical>
              <option>Prescription Distance</optical>
            </select>
          </div>

          <div id="prescription-group">
            <label>How will we get your prescription?</label>
            <select id="prescription-select">
              <option>- SELECT -</option>
              <option>I will email it to hello@tzukuri.com</option>
              <option>Please call me to discuss</option>
            </select>
          </div>
        </form>

        <%= form_for Preorder.new, :html => {:method => :post}, remote:true do |f| %>

        <p class="section-head">Contact information</p>

        <%= label :purchase, :name, "Full Name" %>
        <%= f.text_field :name, placeholder: 'John Smith', autofocus: true %>

        <%= label :purchase, :email, "Email Address" %>
        <%= f.text_field :email, placeholder: 'john@tzukuri.com' %>

        <%= label :purchase, :phone, "Contact Number" %>
        <%= f.telephone_field :phone,    placeholder: '04XX XXX XXX' %>

        <p class="section-head">Shipping information</p>

        <%= label :purchase, :address1, "Address" %>
        <%= f.text_field :address1, placeholder: 'Street name, number, etc.' %>

        <%= label :purchase, :postcode, "Postal Code"  %>
        <%= f.text_field :postal_code, placeholder: '1234', maxlength: 4 %>

        <%= label :purchase, :state, "State"%>
        <%= f.select :state, options_for_select: ['New South Wales', 'ACT', 'Victoria', 'Northern Territory', 'Queensland', 'South Australia', 'Tasmania', 'Western Australia'] %>

        <%= label :purchase, :country, "Country" %>
        <%= f.text_field :country,  placeholder: 'country', value: 'Australia', disabled: true %>

        <% end %>

        <form id="payment-form">
          <p class="section-head" style="padding-top: 15px;">Payment information</p>

          <div id="cc">
              <label for="">Credit Card Number</label>
              <input id="payment_ccNumber" name="number" type="text" data-stripe="number" placeholder="4000 0566 5566 5556">

              <label ford="">Expiry Date</label>
              <select name="month" style="width: 49%" data-stripe="exp-month">
                <option value="1">Jan (01)</option>
                <option value="2">Feb (02)</option>
                <option value="3">Mar (03)</option>
                <option value="4">Apr (04)</option>
                <option value="5">May (05)</option>
                <option value="6">Jun (06)</option>
                <option value="7">Jul (07)</option>
                <option value="8">Aug (08)</option>
                <option value="9">Sep (09)</option>
                <option value="10">Oct (10)</option>
                <option value="11">Nov (11)</option>
                <option value="12">Dec (12)</option>
              </select>

              <select name="year" style="width: 49%" data-stripe="exp-year">
                <option>2017</option>
                <option>2018</option>
                <option>2019</option>
                <option>2020</option>
                <option>2021</option>
                <option>2022</option>
                <option>2023</option>
                <option>2024</option>
                <option>2025</option>
                <option>2026</option>
              </select>

              <label for="">Security Code</label>
              <input id="payment_cvv" name="CVV" type="text" placeholder="Security code" data-stripe="CVV">
          </div>

          <button id="reserve-submit" type="submit" class="order-btn">
            <span id="reserve-for">purchase for 485 AUD</span>
          </button>
        </form>
      </div>
    </div>
  </div>

  <div class="container"><hr/></div>

  <!-- <div class="panel container" id="try-them-on">
    <div class="row" style="text-align: center;">
      <h1>want to try them on?</h1>
    </div>
    <br/><br/>
    <div class="row" style="text-align:center;">
      <div class="four columns">
        <h2 class="title">Personal Try On</h2>
        <p>Choosing glasses without trying them on is difficult. To make it easier, we'll bring them to your office, home or local cafe.</p>
        <button class="alternate">book now &nbsp; &rarr;</button>
      </div>
      <div class="four columns">
        <h2 class="title">Visit our Store</h2>
        <p>We’ve repurposed the Old Clare Bottle Shop as a dedicated try on space for you to experience Unlosable Glasses.</p>
        <button class="alternate">directions &nbsp; &rarr;</button>
      </div>
      <div class="four columns">
        <h2 class="title">Mailing List</h2>
        <p>Sign up with your email and we'll let you know when the glasses are available in your area.</p>
        <button class="alternate">register email &nbsp; &rarr;</button>
      </div>
    </div>
  </div> -->

  <!-- <div class="container"><hr/></div> -->

  <div class="container contracted" id="in-the-box">
    <div class="row">
      <div class="ten columns" style="text-align:left;">
        <h1>what's included</h1>
      </div>
      <div class="two columns" style="text-align:right;">
        <i class="fa fa-2x fa-plus" id="in-the-box-toggle"></i>
      </div>
    </div>

    <div class="row">
      <div class="four columns">
        <%= image_tag 'glasses.png', id: 'unlosable' %>
      </div>
      <div class="four columns">
        <%= image_tag 'microfibre.png', id: 'cloth' %>
      </div>
      <div class="four columns">
        <%= image_tag "dock_cable.png", id: 'charge' %>
      </div>
    </div>

    <div class="row">
        <div class="four columns">
          <p class=>Unlosable Glasses</p>
        </div>
        <div class="four columns">
          <p>Microfibre Cloth</p>
        </div>
        <div class="four columns">
          <p>Charger & Cable</p>
        </div>
      </div>
  </div>

  <div class="container"><hr/></div>

  <div class="container contracted" id="specifications">
    <div class="row">
      <div class="ten columns" style="text-align:left;">
        <h1>technical specifications</h1>
      </div>
      <div class="two columns" style="text-align:right;">
        <i class="fa fa-2x fa-plus" id="tech-specs-toggle"></i>
      </div>
    </div>

    <div class="row">
      <div class="four columns">
        <!--  whats included -->
        <article>
          <p class="bold">What's Included</p>
          <ul>
            <li>Unlosable glasses</li>
            <li>Charging cable</li>
            <li>Charging dock</li>
            <li>Microfibre cleaning cloth</li>
            <li>Documentation</li>
          </ul>
        </article>

        <!-- battery and power -->
        <article>
          <p class="bold">Battery and Power</p>
          <p>
            Battery life up to 30 days. Battery life and charge cycles vary with use, settings, and other factors; actual results will vary. The Tzukuri app will notify you when your glasses require charging.
          </p>
          <ul>
            <li>Battery type: Silver Oxide</li>
            <li>Charge time: Three to four hours</li>
          </ul>
        </aticle>
      </div>
      <div class="four columns">
        <!-- care -->
        <article>
          <!-- <h2>Care</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc pulvinar fringilla mi in sodales. Sed lacinia turpis non quam blandit, ac semper tortor auctor. Ut at lacus ut metus mattis molestie. Quisque lectus velit, egestas vel laoreet ut, euismod vitae eros.</p> -->
        </article>

        <!-- materials -->
        <article>
          <p class="bold">Materials</p>
          <ul>
            <li>Frames: High quality, precision-milled cellulose acetate.</li>
            <li>Non-Prescription Sun: Brown polarised, hand cut, 100% UV protection.</li>
            <li>Prescription Sun: Brown polarised single vision, hand cut, 100% UV protection, back anti-reflective coating, hard coat.</li>
            <li>Prescription Optical: single vision, hand cut, back anti-reflective coating, hard coat.</li>
          </ul>
        </article>

        <!-- environmental requirements -->
        <article>
          <p class="bold">Environmental Requirements</p>
          <ul>
            <li>Operating temperature: -10° to 45° C</li>
            <li>Maximum operating altitude: 9,144 m</li>
          </ul>
        </article>
      </div>
      <div class="four columns">


        <!-- syncing and notifications -->
        <article>
          <p class="bold">Bluetooth and Notifications</p>
          <p>Each pair of Tzukuris connect to your iPhone using wireless Bluetooth Low Energy. Some features will require you to grant access to Location Services, Notifications and Motion & Fitness to function correctly. </p>
          <ul>
            <li>Bluetooth range: Up to 15m</li>
            <li>Requires iPhone 5 or later running iOS 9 and above.</li>
            <li>Compatible with: iPhone 5, iPhone 5C, iPhone SE, iPhone 6, iPhone 6 Plus, iPhone 6s, iPhone 6s Plus, iPhone 7, iPhone 7 Plus</p>
          </ul>
        </article>
      </div>
    </div>
  </div>

  <br/>
</div>

<!-- stripe -->
<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<script>
    // set the stripe keys
    <% if Rails.env.development? %>
        Stripe.setPublishableKey('pk_test_HWxqGZq4R2zTKm5915tgDas4');
    <% else %>
        Stripe.setPublishableKey('pk_live_VAzrbCZ5hRh2i3tXpoS9GL5I');
    <% end %>
</script>
