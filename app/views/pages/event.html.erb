<main>

  <div id="hero">

    <div id="invite-header">
      <span id="tzukuri">T Z U K U R I</span>
      <span id="date">APRIL 4</span>
    </div>

    <div id="invite-details">
      Please join us for an invitation-only demonstration event at <strong>Track 8, Carriageworks</strong> (245 Wilson Street, Eveleigh) at <strong>3:45 PM</strong>.
    </div>

    <div id="invite-rsvp">
      <a href="#">RSVP</a>
    </div>

  </div>

</main>


<script>

  $(function() {
    $('#invite-rsvp a').click(function(event) {

      $('#rsvp-popup').show();

      setTimeout(function() {
        $('#rsvp-popup').removeClass('hidden');
      }, 20);

      $('#blur-content').addClass('blur');
    });
  });

  $(function() {
    $('#rsvp-form input').keyup(function(event) {
      // don't do this on enter
      if (event.keyCode == 13) return;

      var name = $("#rsvp_name").val();
      var email = $("#rsvp_email").val();

      if (name.length > 0 && email.length > 0) {
        $('#rsvp-form button').fadeIn();
      } else {
        $('#rsvp-form button').fadeOut();
      }
    });

    function showSubscribeError(msg) {
      $('#subscribe-status').text(msg);
      $('#text-container label').fadeOut();
      $('#subscribe-status').fadeIn();
    }

    $('#new_rsvp').on('ajax:success', function(e, data, status, xhr) {
      console.log(data);

      if (data.success) {

        // disable the fields
        $("#rsvp_name").prop("disabled", true);
        $("#rsvp_email").prop("disabled", true);
        $("#rsvp_inviter").prop("disabled", true);

        $('#rsvp-form button').fadeOut();

        $('#rsvp-form #rsvp-confirm #rsvp-status').fadeIn();
        $("#rsvp-form #rsvp-confirm #add-calendar").fadeIn();
      } else {
        // show some kind of error
        $('#rsvp-form button').fadeOut();

        $('#rsvp-form #rsvp-confirm #rsvp-status').fadeIn();
        $('#rsvp-form #rsvp-confirm #rsvp-status').html("An error occurred, please reload and try again.");
      }
    }).on('ajax:error', function(e, xhr, status, error) {
      // show some kind of error
      $('#rsvp-form button').fadeOut();

      $('#rsvp-form #rsvp-confirm #rsvp-status').fadeIn();
      $('#rsvp-form #rsvp-confirm #rsvp-status').html("Network error, please reload and try again.");
    });
  });


</script>
